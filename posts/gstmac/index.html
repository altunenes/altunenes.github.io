<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><title>
         How We Fixed macOS GStreamer Library Path Issues in Rust Releases
        
    </title><meta content="How We Fixed macOS GStreamer Library Path Issues in Rust Releases" property=og:title><meta content="personal blog" property=og:description><meta content="personal blog" name=description><link href=/icon/favicon.png rel=icon type=image/png><link href=https://altunenes.github.io/fonts.css rel=stylesheet><link href=https://altunenes.github.io/atom.xml rel=alternate title=altunenes type=application/atom+xml><link href=https://altunenes.github.io/theme/light.css rel=stylesheet><link href=https://altunenes.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://altunenes.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://altunenes.github.io/main.css media=screen rel=stylesheet><script data-cf-beacon='{"token": "37a0f981a37240aea00b781e300bc6c0"}' defer src=https://static.cloudflareinsights.com/beacon.min.js></script></head><script>// Function to set the theme
        function setTheme(theme) {
            document.documentElement.className = theme;
            localStorage.setItem('theme', theme);
        }

        // Function to get the saved theme
        function getSavedTheme() {
            return localStorage.getItem('theme') || 'light';
        }

        // Set the theme on page load
        document.addEventListener('DOMContentLoaded', (event) => {
            setTheme(getSavedTheme());
        });</script><body><div class=content><header><div class=main><a href=https://altunenes.github.io/>altunenes</a><div class=socials><a class=social href=https://twitter.com/emportent rel=me> <img alt=x src=https://altunenes.github.io/social_icons/x.svg> </a><a class=social href=https://github.com/altunenes rel=me> <img alt=github src=https://altunenes.github.io/social_icons/github.svg> </a><a href="https://scholar.google.com/citations?user=_OtEw5oAAAAJ&hl" class=social rel=me> <img alt=scholar src=https://altunenes.github.io/social_icons/googlescholar.svg> </a><a class=social href=https://www.linkedin.com/in/enes-altun-0a3076167 rel=me> <img alt=linkedin src=https://altunenes.github.io/social_icons/linkedin.svg> </a><a class=social href=https://www.instagram.com/altunanes/ rel=me> <img alt=instagram src=https://altunenes.github.io/social_icons/instagram.svg> </a><a class=social href=https://orcid.org/0000-0002-6478-6909 rel=me> <img alt=orcid src=https://altunenes.github.io/social_icons/orcid.svg> </a><a class=social href=https://www.shadertoy.com/user/altunenes rel=me> <img alt=shadertoy src=https://altunenes.github.io/social_icons/shadertoy.svg> </a><a class=social href=https://bsky.app/profile/altunenes.bsky.social rel=me> <img alt=bluesky src=https://altunenes.github.io/social_icons/bluesky.svg> </a></div></div><nav><a href=https://altunenes.github.io/posts style=margin-left:.7em>/posts</a><a href=https://altunenes.github.io/projects style=margin-left:.7em>/projects</a><a href=https://altunenes.github.io/about style=margin-left:.7em>/about</a><a href=https://altunenes.github.io/tags style=margin-left:.7em>/tags</a><a href=https://altunenes.github.io/CV style=margin-left:.7em>/CV</a><button aria-label="Toggle dark mode" id=dark-mode-toggle onclick=toggleTheme();><img alt="Light mode" id=sun-icon src=https://altunenes.github.io/feather/sun.svg> <img alt="Dark mode" id=moon-icon src=https://altunenes.github.io/feather/moon.svg></button></nav></header><script>function toggleTheme() {
    const html = document.documentElement;
    const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    
    html.classList.remove(currentTheme);
    html.classList.add(newTheme);
    
    localStorage.setItem('theme', newTheme);
    updateThemeToggleIcons();
}

function updateThemeToggleIcons() {
    const sunIcon = document.getElementById('sun-icon');
    const moonIcon = document.getElementById('moon-icon');
    const isDarkMode = document.documentElement.classList.contains('dark');
    
    sunIcon.style.display = isDarkMode ? 'none' : 'inline';
    moonIcon.style.display = isDarkMode ? 'inline' : 'none';
}

// Set initial theme
const savedTheme = localStorage.getItem('theme') || 'light';
document.documentElement.classList.add(savedTheme);
updateThemeToggleIcons();</script><main><article><div class=title><div class=page-header>How We Fixed macOS GStreamer Library Path Issues in Rust Releases<span class=primary-color style=font-size:1.6em>.</span></div><div class=meta>Posted on <time>2025-09-02</time></div></div><h1>Table of Contents</h1><ul><li><a href=https://altunenes.github.io/posts/gstmac/#how-i-fixed-macos-gstreamer-library-path-issues-in-rust-releases>How I Fixed macOS GStreamer Library Path Issues in Rust Releases</a> <ul><li><a href=https://altunenes.github.io/posts/gstmac/#the-problem>The Problem</a><li><a href=https://altunenes.github.io/posts/gstmac/#the-solution>The Solution</a></ul></ul><section class=body><h2 id=how-i-fixed-macos-gstreamer-library-path-issues-in-rust-releases><span style=color:orange>How I Fixed macOS GStreamer Library Path Issues in Rust Releases</span></h2><p>Very short post but I spent way too many hours debugging why our Rust app worked fine in development but kept crashing on macOS release builds due to GStreamer library conflicts. Users would see this error when double-clicking the app:<pre class=giallo style=color:#bfbdb6;background-color:#0d1017><code data-lang=shellscript><span class=giallo-l><span style=color:#59c2ff>  objc[43583]:</span><span style=color:#aad94c> Class GstCocoaApplicationDelegate is implemented in both</span></span>
<span class=giallo-l><span style=color:#59c2ff>  /Library/Frameworks/GStreamer.framework/Versions/1.0/lib/libgstreamer-1.0.0.dylib</span></span>
<span class=giallo-l><span style=color:#59c2ff>  and</span><span style=color:#aad94c> /Users/user/app/gstreamer/lib/libgstreamer-1.0.0.dylib</span></span></code></pre><h3 id=the-problem><span style=color:orange>The Problem</span></h3><p>Turns out our GitHub Actions script was trying to fix <code>@rpath</code> entries with <code>install_name_tool</code>, but those commands were just failing silently.<p>Rust binaries don't have enough header padding by default for <code>install_name_tool</code> to actually work.<h3 id=the-solution><span style=color:orange>The Solution</span></h3><p>Add this linker flag to your macOS Rust builds:<pre class=giallo style=color:#bfbdb6;background-color:#0d1017><code data-lang=shellscript><span class=giallo-l><span style=color:#ff8f40>export</span><span> RUSTFLAGS</span><span style=color:#f29668>=</span><span style=color:#aad94c>"</span><span>$RUSTFLAGS</span><span style=color:#aad94c> -C link-arg=-Wl,-headerpad_max_install_names"</span></span></code></pre><p>This simple flag reserves enough space in the binary header so the tool can actually do its job.<ul><li><strong>Before:</strong> Binary had unfixable <code>@rpath</code> entries → loaded both system and bundled GStreamer → conflicts<li><strong>After:</strong> Binary library paths properly fixed → loads only bundled GStreamer → works perfectly</ul><p>So always verify that your <code>install_name_tool</code> commands actually succeed. Silent failures can waste hours of debugging!</section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=https://altunenes.github.io/tags/gstreamer/>GStreamer</a><li><a href=https://altunenes.github.io/tags/macos/>macOS</a><li><a href=https://altunenes.github.io/tags/rust/>Rust</a></ul></nav></div><hr><div class=citation style=color:var(--text-color-secondary);margin-top:2em;font-size:.8em><p style=margin-bottom:.6em;font-size:.9em;font-weight:700>Cite:<p style=margin-bottom:.5em>Altun, E. (2025, September 02). <em>How We Fixed macOS GStreamer Library Path Issues in Rust Releases</em>. Retrieved from <a href=https://altunenes.github.io/posts/gstmac/>https://altunenes.github.io/posts/gstmac/</a><p><small><a href=http://creativecommons.org/licenses/by/4.0/ rel=license target=_blank>CC BY 4.0</a></small></div></article></main><div class=giscus></div><script async crossorigin data-category=General data-category-id=DIC_kwDOL5Nyoc4CfU7n data-emit-metadata=0 data-input-position=bottom data-lang=en data-mapping=pathname data-reactions-enabled=1 data-repo=altunenes/altunenes.github.io data-repo-id=R_kgDOL5NyoQ data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js></script></div>